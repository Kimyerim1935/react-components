import{j as i}from"./jsx-runtime-BjgbQsUx.js";import{r as a}from"./index-DDT2H6na.js";import{u as k,B as q}from"./usePosition-BmVnmNgh.js";import{L as E,a as N}from"./Listbox-C6x8YZCb.js";import{T as R}from"./TextField-x0uPwc1f.js";import{j as O}from"./format-BvyHdC65.js";function V(v){const{helperText:T,labelText:l,name:d,onChange:o,onSelect:u,options:c,value:r}=v,x=a.useRef(null),[s,g]=a.useState(!1),[t,f]=a.useState(),j=a.useId(),p=a.useId(),y=a.useId(),h=k({inputId:y,isVisible:s,listBoxId:p,totalLength:c.length}),C=a.useCallback(e=>{f(e),u(e),o(e.label)},[u,o]),w=a.useCallback(e=>{o(e.currentTarget.value),e.currentTarget.value||(f(void 0),u())},[o,u]),b=a.useCallback(()=>{g(t&&s?!1:e=>!e)},[t,s]);return a.useEffect(()=>{const e=x.current;if(s&&e){const{left:n,marginTop:m,maxWidth:I,top:S}=h;e.style.top=`${S}px`,e.style.left=`${n}px`,e.style.marginTop=`${m}px`;const $=e.getElementsByTagName("ul")[0];$.style.maxWidth=`${I}px`}},[s,h]),i.jsxs("div",{children:[i.jsx("div",{className:"flex w-full items-center justify-center gap-1.25 bg-white",children:i.jsx(R,{isFullWidth:!0,"aria-expanded":s,"aria-label":l?void 0:`${d}`,helperText:T,id:y,labelText:l,type:"text",value:r,"aria-autocomplete":"list","aria-controls":p,onChange:w,onClick:b,role:"combobox"})}),s&&i.jsx(q,{isOpen:s,onClose:b,children:i.jsx("div",{ref:x,className:"fixed w-full",children:i.jsx(E,{"aria-label":l?void 0:d,id:p,labelId:l?j:void 0,value:(t==null?void 0:t.value)||"",options:c,renderItem:e=>i.jsx(N,{currentValue:(t==null?void 0:t.value)||"",value:e.value,onClick:()=>C(e),label:r?e.label.split(new RegExp(`(${r})`,"gi")).filter(n=>n).map((n,m)=>i.jsx("span",{className:O((t==null?void 0:t.value)===e.value?"text-white":new RegExp(`(${r})`,"gi").test(n)?"text-primary-800":"text-primary-950",new RegExp(`(${r})`,"gi").test(n)?"font-semibold":"font-normal"),children:n},n+m)):e.label},e.label)})})})]})}V.__docgenInfo={description:"",methods:[],displayName:"SharedAutocomplete",props:{name:{required:!0,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newValue: string) => void",signature:{arguments:[{type:{name:"string"},name:"newValue"}],return:{name:"void"}}},description:""},onSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(newOption?: OptionsType) => void",signature:{arguments:[{type:{name:"OptionsType"},name:"newOption"}],return:{name:"void"}}},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"OptionsType"}],raw:"OptionsType[]"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},labelText:{required:!1,tsType:{name:"string"},description:""}}};export{V as S};
